<div class="mis-prestamos">
  <h2>Mis Préstamos Activos</h2>
  <div *ngIf="loading">Cargando préstamos...</div>
  <div *ngIf="error">{{ error }}</div>
  <table *ngIf="!loading && prestamos.length">
    <thead>
      <tr>
        
        <th>Libro</th>
        <th>Fecha Entrega</th>
        <th>Fecha Devolución</th>
        <th>Estado</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let p of prestamos">
        
        <td>{{ p.libro_titulo }}</td>
        <td>{{ p.fecha_entrega | date:'dd/MM/yyyy' }}</td>
        <td>{{ p.fecha_devolucion | date:'dd/MM/yyyy' }}</td>
        <td>
          <span class="badge"
                [ngClass]="{
                  'badge-pendiente': p.estado_nombre && p.estado_nombre.trim() === 'Pendiente',
                  'badge-activo': p.estado_nombre && p.estado_nombre.trim() === 'Activo',
                  'badge-devuelto': p.estado_nombre && p.estado_nombre.trim() === 'Devuelto',
                  'badge-rechazado': p.estado_nombre && p.estado_nombre.trim() === 'Rechazado'
                }">
            {{ p.estado_nombre ? p.estado_nombre.trim() : 'Sin estado' }}
          </span>
        </td>
      </tr>
    </tbody>
  </table>
  <div *ngIf="!loading && !prestamos.length">No tienes préstamos activos.</div>

  <div class="pagination simple-pagination" *ngIf="pages > 1 || (!loading && prestamos.length > 0)">
    <button (click)="cambiarPagina(page - 1)" [disabled]="page === 1" class="simple-btn prev">Anterior</button>
    <span class="simple-info">Página {{ page }} de {{ pages }}</span>
    <button (click)="cambiarPagina(page + 1)" [disabled]="page === pages" class="simple-btn next">Siguiente</button>
  </div>
</div>
